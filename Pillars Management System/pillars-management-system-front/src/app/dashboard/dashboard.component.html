<div class="container">
    <app-header-logo></app-header-logo>

    <!-- Add New Customer Button -->
    <button class="btn btn-primary add-new-customer-btn mt-5 ms-5 px-4 py-3" type="button"
        (click)="openCreateNewCustomerDialog()">
        <i class="bi bi-plus-square"></i>
        Add New Customer
    </button>

    <!-- Table -->
    <div class="ms-5 mt-3 table overflow-auto">
        <!-- Table Headers -->
        <div class="d-flex w-100">
            <div class=" w-100 m-0">
                <div class="row w-100 m-0 p-0 bottom-gray-border">

                    <!-- Number Of Customer (#) Attribute -->
                    <div class="header-attr attr col-1 text-center px-0 py-2">
                        <div class="d-flex align-items-center justify-content-center">#</div>
                    </div>

                    <!-- Name Attribute -->
                    <div class="header-attr attr col-3 text-center px-0 py-2">
                        <div class="d-flex align-items-center justify-content-center">Name</div>
                    </div>

                    <!-- Email Address Attribute -->
                    <div class="header-attr attr col-4 text-center px-0 py-2">
                        <div class="d-flex align-items-center justify-content-center">Email Address</div>
                    </div>

                    <!-- Creation Date Attribute -->
                    <div class="header-attr attr col-2 text-center px-0 py-2">
                        <div class="d-flex align-items-center justify-content-center">Creation Date</div>
                    </div>

                    <!-- Functions Attribute -->
                    <div class="header-attr attr col-2 text-center px-0 py-2">

                    </div>
                </div>
            </div>

        </div>

        <ng-container *ngFor="let customerAndPhoneNumbers of customerService.customersAndPhoneNumbers | keyvalue">
            <!-- Row -->
            <div class="d-flex w-100 bottom-gray-border" id="customer-row-{{customerAndPhoneNumbers.key}}">
                <div class=" w-100 m-0">
                    <div class="row w-100 h-100 m-0 p-0">

                        <!-- Number Of Customer -->
                        <div class="attr overflow-auto col-1 text-center px-0 py-2">
                            <div class="d-flex align-items-center h-100 justify-content-center">{{
                                customerAndPhoneNumbers.key }}</div>
                        </div>

                        <!-- Name Attribute -->
                        <div class="attr overflow-auto col-3 text-center px-0 py-2">
                            <div class="d-flex align-items-center h-100 justify-content-center">{{
                                customerAndPhoneNumbers.value.customer.full_Name! | firstAndLastName }}</div>
                        </div>

                        <!-- Email Address Attribute -->
                        <div class="attr overflow-auto col-4 text-center px-0 py-2">
                            <div class="d-flex align-items-center h-100 justify-content-center">{{
                                customerAndPhoneNumbers.value.customer.email }}
                            </div>
                        </div>

                        <!-- Creation Date Attribute -->
                        <div class="attr overflow-auto col-2 text-center px-0 py-2">
                            <div class="d-flex align-items-center h-100 justify-content-center">{{
                                customerAndPhoneNumbers.value.customer.creation_Date | date: 'mediumDate' }}</div>
                        </div>

                        <!-- Functions Attribute -->
                        <div class="attr col-2 text-center px-0 py-2">

                            <div class="row col-12 justify-content-around m-0">
                                <div class="col-1"></div>
                                <div class="col-3">
                                    <i class="bi bi-pencil-fill" mat-raised-button
                                        (click)="openUpdateCustomerDialog(customerAndPhoneNumbers.value.customer)"
                                        style="color: #0B5ED7; font-size: 20px; cursor: pointer;"></i>
                                </div>
                                <div class="col-3">
                                    <i class="bi bi-trash-fill" mat-raised-button
                                        (click)="openDeleteCustomerDialog(customerAndPhoneNumbers.value.customer)"
                                        style="color: #DB0000; font-size: 20px; cursor: pointer;"></i>
                                </div>

                                <div class="col-3 transtion-0-3"
                                    id="expand-btn-{{customerAndPhoneNumbers.value.customer.id!}}-container">
                                    <i class="bi bi-caret-down-fill" style="font-size: 20px; cursor: pointer;"
                                        (click)="handleCustomerExpand(customerAndPhoneNumbers.key)"></i>
                                </div>
                                <div class="col-1"></div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <!-- Expand Row -->
            <div class="d-flex w-100" style="height: 0px; overflow: hidden;"
                id="expand-container-{{customerAndPhoneNumbers.key}}">
                <div class="position-relative" id="expand-information-{{customerAndPhoneNumbers.key}}"
                    style="width: 100%; height: 100%; transition: 0.3s; top: -200px;">

                    <!-- Expand Row Container-->
                    <div class="d-flex w-100 bottom-gray-border p-0">
                        <div class="w-100 m-0">
                            <div class="row w-100 h-100 p-0 justify-content-center">
                                <div class="col-8 h-100 p-0"
                                    style="border-right: 1px solid #4343437d; border-left: 1px solid #4343437d">

                                    <div class="w-100 h-100 m-0">

                                        <div class="row justify-content-start p-0 h-100 w-100 m-0">

                                            <!-- Customer Details -->
                                            <div class="col-9 h-100" style="border-right: 1px solid #4343437d;">

                                                <!-- Full Name -->
                                                <div class="row justify-content-center mt-4">

                                                    <!-- Full Name Attribute-->
                                                    <div class="col-3">
                                                        <div class="text-end detail-attr">Full Name: </div>
                                                    </div>

                                                    <!-- Full Name Value -->
                                                    <div class="col-8">
                                                        <div class="detail-attr-value">{{
                                                            customerAndPhoneNumbers.value.customer.full_Name! |
                                                            titlecase }}
                                                        </div>
                                                    </div>

                                                </div>

                                                <!-- Email -->
                                                <div class="row justify-content-center mt-2">

                                                    <!-- Email Attribute-->
                                                    <div class="col-3">
                                                        <div class="text-end detail-attr">Email: </div>
                                                    </div>

                                                    <!-- Email Value -->
                                                    <div class="col-8">
                                                        <div class="detail-attr-value">{{
                                                            customerAndPhoneNumbers.value.customer.email }}</div>
                                                    </div>

                                                </div>

                                                <!-- Gender -->
                                                <div class="row justify-content-center mt-2">

                                                    <!-- Gender Attribute-->
                                                    <div class="col-3">
                                                        <div class="text-end detail-attr">Gender: </div>
                                                    </div>

                                                    <!-- Gender Value -->
                                                    <div class="col-8">
                                                        <div class="detail-attr-value">{{
                                                            customerAndPhoneNumbers.value.customer.gender | titlecase }}
                                                        </div>
                                                    </div>

                                                </div>

                                                <!-- Birth Date -->
                                                <div class="row justify-content-center mt-2">

                                                    <!-- Birth Date Attribute-->
                                                    <div class="col-3">
                                                        <div class="text-end detail-attr">Birth Date: </div>
                                                    </div>

                                                    <!-- Birth Date Value -->
                                                    <div class="col-8">
                                                        <div class="detail-attr-value">{{
                                                            customerAndPhoneNumbers.value.customer.bod |
                                                            date:'mediumDate'}}
                                                        </div>
                                                    </div>

                                                </div>

                                                <!-- Creation Date -->
                                                <div class="row justify-content-center mt-2">

                                                    <!-- Creation Date Attribute-->
                                                    <div class="col-3">
                                                        <div class="text-end detail-attr">Creation Date: </div>
                                                    </div>

                                                    <!-- Creation Date Value -->
                                                    <div class="col-8">
                                                        <div class="detail-attr-value">{{
                                                            customerAndPhoneNumbers.value.customer.creation_Date | date:
                                                            'medium' }}
                                                        </div>
                                                    </div>

                                                </div>

                                                <!-- Functions -->
                                                <div class="row justify-content-center my-5">
                                                    <div class="col-4 d-flex justify-content-around">

                                                        <i class="bi bi-pencil-fill" mat-raised-button
                                                            (click)="openUpdateCustomerDialog(customerAndPhoneNumbers.value.customer)"
                                                            style="color: #0B5ED7; font-size: 20px; cursor: pointer;"></i>

                                                        <i class="bi bi-trash-fill" mat-raised-button
                                                            (click)="openDeleteCustomerDialog(customerAndPhoneNumbers.value.customer)"
                                                            style="color: #DB0000; font-size: 20px; cursor: pointer;"></i>


                                                        <i class="bi bi-caret-down-fill rotate-180deg"
                                                            style="font-size: 20px; cursor: pointer;"
                                                            (click)="handleCustomerExpand(customerAndPhoneNumbers.key)"></i>

                                                    </div>
                                                </div>

                                            </div>

                                            <!-- Customer Phone Numbers -->
                                            <div class="col-3 h-100">
                                                <div class="row m-auto">
                                                    <div class="col-12 text-center detail-attr mt-4 my-2">
                                                        Phone Number
                                                    </div>
                                                </div>

                                                <!-- Phone Numbers Values -->
                                                <div class="row col-10 m-auto overflow-auto"
                                                    style="border: 1px solid black; border-bottom: none; max-height: 166px;">
                                                    <div class="col-12">

                                                        <ng-container
                                                            *ngFor="let phoneNumber of customerAndPhoneNumbers.value.phoneNumbers">
                                                            <!-- Phone Number -->
                                                            <div class="row py-2" id="phone-id-{{phoneNumber.id}}"
                                                                style="border-bottom: 1px solid black;">
                                                                <div class="col-12 text-center fw-bold overflow-auto">
                                                                    {{phoneNumber.tel}}
                                                                </div>

                                                                <div class="col-12 my-1">
                                                                    <div class="d-flex justify-content-around">
                                                                        <div class="col-3"></div>
                                                                        <div
                                                                            class="col-3 d-flex justify-content-center">
                                                                            <i class="bi bi-pencil-fill"
                                                                                (click)="openUpdateTelephoneDialog(phoneNumber)"
                                                                                style="color: #0B5ED7; font-size: 20px; cursor: pointer;"></i>
                                                                        </div>

                                                                        <div
                                                                            class="col-3 d-flex justify-content-center">
                                                                            <i class="bi bi-trash-fill"
                                                                                (click)="openDeleteTelephoneDialog(phoneNumber)"
                                                                                style="color: #DB0000; font-size: 20px; cursor: pointer;"></i>
                                                                        </div>
                                                                        <div class="col-3"></div>
                                                                    </div>
                                                                </div>

                                                            </div>

                                                        </ng-container>
                                                    </div>

                                                </div>

                                                <div class="col-12 my-3">
                                                    <button class="btn btn-success px-3 py-2 d-block m-auto"
                                                        (click)="openAddTelephoneDialog(customerAndPhoneNumbers.key)">Add
                                                        Telephone</button>
                                                </div>
                                            </div>
                                        </div>


                                    </div>


                                </div>


                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </ng-container>

    </div>



</div>